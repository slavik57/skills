/* eslint no-console:0 */

'use strict';

exports.__esModule = true;
exports.skim = skim;
exports.normalizeArr = normalizeArr;
exports.debugLog = debugLog;
exports.error = error;
exports.deprecate = deprecate;
exports.warn = warn;
exports.exit = exit;
exports.containsUndefined = containsUndefined;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _lodash = require('lodash');

var _chalk = require('chalk');

var _chalk2 = _interopRequireDefault(_chalk);

// Pick off the attributes from only the current layer of the object.

function skim(data) {
  return _lodash.map(data, function (obj) {
    return _lodash.pick(obj, _lodash.keys(obj));
  });
}

// Check if the first argument is an array, otherwise uses all arguments as an
// array.

function normalizeArr() {
  var args = new Array(arguments.length);
  for (var i = 0; i < args.length; i++) {
    args[i] = arguments[i];
  }
  if (Array.isArray(args[0])) {
    return args[0];
  }
  return args;
}

function debugLog(msg) {
  console.log(msg);
}

function error(msg) {
  console.log(_chalk2['default'].red('Knex:Error ' + msg));
}

// Used to signify deprecated functionality.

function deprecate(method, alternate) {
  warn(method + ' is deprecated, please use ' + alternate);
}

// Used to warn about incorrect use, without error'ing

function warn(msg) {
  console.log(_chalk2['default'].yellow('Knex:warning - ' + msg));
}

function exit(msg) {
  console.log(_chalk2['default'].red(msg));
  process.exit(1);
}

function containsUndefined(mixed) {
  var argContainsUndefined = false;

  if (mixed && _lodash.isFunction(mixed.toSQL)) {
    //Any QueryBuilder or Raw will automatically be validated during compile.
    return argContainsUndefined;
  }

  if (_lodash.isArray(mixed)) {
    for (var i = 0; i < mixed.length; i++) {
      if (argContainsUndefined) break;
      argContainsUndefined = this.containsUndefined(mixed[i]);
    }
  } else if (_lodash.isObject(mixed)) {
    for (var key in mixed) {
      if (argContainsUndefined) break;
      argContainsUndefined = this.containsUndefined(mixed[key]);
    }
  } else {
    argContainsUndefined = _lodash.isUndefined(mixed);
  }

  return argContainsUndefined;
}
//# sourceMappingURL=data:application/json;base64,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XG5cbmltcG9ydCB7IG1hcCwgcGljaywga2V5cywgaXNGdW5jdGlvbiwgaXNVbmRlZmluZWQsIGlzT2JqZWN0LCBpc0FycmF5IH0gZnJvbSAnbG9kYXNoJ1xuaW1wb3J0IGNoYWxrIGZyb20gJ2NoYWxrJztcblxuLy8gUGljayBvZmYgdGhlIGF0dHJpYnV0ZXMgZnJvbSBvbmx5IHRoZSBjdXJyZW50IGxheWVyIG9mIHRoZSBvYmplY3QuXG5leHBvcnQgZnVuY3Rpb24gc2tpbShkYXRhKSB7XG4gIHJldHVybiBtYXAoZGF0YSwgKG9iaikgPT4gcGljayhvYmosIGtleXMob2JqKSkpO1xufVxuXG4vLyBDaGVjayBpZiB0aGUgZmlyc3QgYXJndW1lbnQgaXMgYW4gYXJyYXksIG90aGVyd2lzZSB1c2VzIGFsbCBhcmd1bWVudHMgYXMgYW5cbi8vIGFycmF5LlxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZUFycigpIHtcbiAgY29uc3QgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTtcbiAgfVxuICBpZiAoQXJyYXkuaXNBcnJheShhcmdzWzBdKSkge1xuICAgIHJldHVybiBhcmdzWzBdO1xuICB9XG4gIHJldHVybiBhcmdzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVidWdMb2cobXNnKSB7XG4gIGNvbnNvbGUubG9nKG1zZyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlcnJvcihtc2cpIHtcbiAgY29uc29sZS5sb2coY2hhbGsucmVkKGBLbmV4OkVycm9yICR7bXNnfWApKVxufVxuXG4gIC8vIFVzZWQgdG8gc2lnbmlmeSBkZXByZWNhdGVkIGZ1bmN0aW9uYWxpdHkuXG5leHBvcnQgZnVuY3Rpb24gZGVwcmVjYXRlKG1ldGhvZCwgYWx0ZXJuYXRlKSB7XG4gIHdhcm4oYCR7bWV0aG9kfSBpcyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlICR7YWx0ZXJuYXRlfWApO1xufVxuXG4gIC8vIFVzZWQgdG8gd2FybiBhYm91dCBpbmNvcnJlY3QgdXNlLCB3aXRob3V0IGVycm9yJ2luZ1xuZXhwb3J0IGZ1bmN0aW9uIHdhcm4obXNnKSB7XG4gIGNvbnNvbGUubG9nKGNoYWxrLnllbGxvdyhgS25leDp3YXJuaW5nIC0gJHttc2d9YCkpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleGl0KG1zZykge1xuICBjb25zb2xlLmxvZyhjaGFsay5yZWQobXNnKSlcbiAgcHJvY2Vzcy5leGl0KDEpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb250YWluc1VuZGVmaW5lZChtaXhlZCkge1xuICBsZXQgYXJnQ29udGFpbnNVbmRlZmluZWQgPSBmYWxzZTtcblxuICBpZihtaXhlZCAmJiBpc0Z1bmN0aW9uKG1peGVkLnRvU1FMKSkge1xuICAgIC8vQW55IFF1ZXJ5QnVpbGRlciBvciBSYXcgd2lsbCBhdXRvbWF0aWNhbGx5IGJlIHZhbGlkYXRlZCBkdXJpbmcgY29tcGlsZS5cbiAgICByZXR1cm4gYXJnQ29udGFpbnNVbmRlZmluZWQ7XG4gIH1cblxuICBpZihpc0FycmF5KG1peGVkKSkge1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBtaXhlZC5sZW5ndGg7IGkrKykge1xuICAgICAgaWYoYXJnQ29udGFpbnNVbmRlZmluZWQpIGJyZWFrO1xuICAgICAgYXJnQ29udGFpbnNVbmRlZmluZWQgPSB0aGlzLmNvbnRhaW5zVW5kZWZpbmVkKG1peGVkW2ldKTtcbiAgICB9XG4gIH0gZWxzZSBpZihpc09iamVjdChtaXhlZCkpIHtcbiAgICBmb3IoY29uc3Qga2V5IGluIG1peGVkKSB7XG4gICAgICBpZihhcmdDb250YWluc1VuZGVmaW5lZCkgYnJlYWs7XG4gICAgICBhcmdDb250YWluc1VuZGVmaW5lZCA9IHRoaXMuY29udGFpbnNVbmRlZmluZWQobWl4ZWRba2V5XSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGFyZ0NvbnRhaW5zVW5kZWZpbmVkID0gaXNVbmRlZmluZWQobWl4ZWQpO1xuICB9XG5cbiAgcmV0dXJuIGFyZ0NvbnRhaW5zVW5kZWZpbmVkO1xufSJdfQ==